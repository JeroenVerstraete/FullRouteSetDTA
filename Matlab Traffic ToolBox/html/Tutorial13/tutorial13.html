
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Tutorial 13: Introducing implicit stochastic equilibrium routing</title><meta name="generator" content="MATLAB 8.3"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2016-06-23"><meta name="DC.source" content="tutorial13.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>Tutorial 13: Introducing implicit stochastic equilibrium routing</h1><!--introduction--><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Disclaimer</a></li><li><a href="#2">Introduction</a></li><li><a href="#3">Loading the data</a></li><li><a href="#4">Setup the simulation</a></li><li><a href="#5">Setup the dynamic equilibrium simulation</a></li><li><a href="#6">Transform CVN values to travel times</a></li><li><a href="#7">Visualize the split rates at the diverge</a></li><li><a href="#8">Loading the data</a></li><li><a href="#9">Setup the simulation</a></li><li><a href="#10">Setup the dynamic equilibrium simulation</a></li><li><a href="#11">Transform CVN values to travel times</a></li><li><a href="#12">Visualize the split rates at the diverge</a></li><li><a href="#13">Closing notes</a></li></ul></div><h2>Disclaimer<a name="1"></a></h2><p>This file is part of the matlab package for dynamic traffic assignments developed by the KULeuven.</p><p>Copyright (C) 2016  Himpe Willem, Leuven, Belgium</p><p>This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or any later version.</p><p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.</p><p>You should have received a copy of the GNU General Public License along with this program.  If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>.</p><p>More information at: <a href="http://www.mech.kuleuven.be/en/cib/traffic/downloads">http://www.mech.kuleuven.be/en/cib/traffic/downloads</a> or contact: willem.himpe {@} kuleuven.be</p><h2>Introduction<a name="2"></a></h2><p>In this tutorial a basic algorithm is implemented to find a stochastic user equilibrium in a dynamic traffic assignment. The algorithm is based on an implicit routing procedure. This requires formulating a topological order of nodes to describe all available route alternatives without circles. The topological order based on the shortest travel times has a large influence on the convergence and solution of the algorithm.</p><pre class="codeinput"><span class="comment">%add these folders to the search path</span>
addpath(<span class="string">'Dynamic Traffic Assignment'</span>,<span class="string">'Visualization Tools'</span>,<span class="string">'Network Data'</span>)
javaclasspath(<span class="string">'Dynamic Traffic Assignment'</span>);
<span class="comment">%clear the work space</span>
clear
<span class="comment">%clear the command window</span>
clc
<span class="comment">%close all windows</span>
close <span class="string">all</span>

display(<span class="string">'&lt;&lt;&lt;Introducing implicit stochastic equilibrium routing&gt;&gt;&gt;'</span>)
</pre><pre class="codeoutput">&lt;&lt;&lt;Introducing implicit stochastic equilibrium routing&gt;&gt;&gt;
</pre><h2>Loading the data<a name="3"></a></h2><p>The network represents a simple two-route network with a bottleneck on the shortest alternative. The longer alternative has only a single link which is longer. This link is the first link of the alternative.</p><pre class="codeinput"><span class="comment">% Network and demand data</span>
load <span class="string">net6.mat</span>

<span class="comment">% Plot the network</span>
plotNetwork(nodes,links,true,[]);

<span class="comment">% Displays the link properties of the alternative</span>
links(7:10,:)
</pre><pre class="codeoutput">
ans = 

    id    fromNode    toNode    length    freeSpeed    capacity    kJam
    __    ________    ______    ______    _________    ________    ____

     7     2           8        5         100          2000        120 
     8     8           9        1         100          2000        120 
     9     9          10        1         100          2000        120 
    10    10           6        1         100          2000        120 

</pre><img vspace="5" hspace="5" src="tutorial13_01.png" alt=""> <h2>Setup the simulation<a name="4"></a></h2><p>Before the simulation can be run the time interval has to be set and the total number of time steps has to be defined.</p><pre class="codeinput"><span class="comment">%setup the time interval and total number of time steps</span>
dt = 0.01;
totT = round(1.5/dt);

<span class="comment">%build the full ODmatrix</span>
[ODmatrix,origins,destinations] = buildODmatrix(ODmatrices,timeSeries,dt,totT);
</pre><h2>Setup the dynamic equilibrium simulation<a name="5"></a></h2><p>The routing behavior in the stochastic routing behaviour is aggregated over larger time intervals to speed up computation. It is believed that the route choice time intervals varies with a much lower frequency in reality than the typical interval of a simulation. The routing is described by a logit model with a scaling parameter to capture the variance of the error term.</p><pre class="codeinput"><span class="comment">%time interval for the route choice</span>
rc_dt = dt;
<span class="comment">%maximum number of iterations</span>
max_it = 100;
<span class="comment">%scaling of the updates over iterations (&lt;1)</span>
alpha = 0.25;
<span class="comment">%scaling of the utility (logit)</span>
theta = 0.010;

<span class="comment">%run DTA with deterministic route choice and MSA averaging</span>
tic
[cvn_up,cvn_down,TF] = DTA_STOCH(nodes,links,origins,destinations,ODmatrix,dt,totT,rc_dt,max_it,alpha,theta);
toc
</pre><pre class="codeoutput">Maximum Iteration limit reached: 100 Gap: 3.9341e-08
Elapsed time is 32.919600 seconds.
</pre><img vspace="5" hspace="5" src="tutorial13_02.png" alt=""> <img vspace="5" hspace="5" src="tutorial13_03.png" alt=""> <h2>Transform CVN values to travel times<a name="6"></a></h2><p>The upstream and dowsntream CVN functions of the link transmission model are transformed into travel times for every link in the network. The travel times are compared for the main route (from split to merge) and the alternative route.</p><pre class="codeinput"><span class="comment">%calculate the simulated travel times</span>
[simTT] = cvn2tt(sum(cvn_up,3),sum(cvn_down,3),dt,totT,links);

<span class="comment">%visualize the travel time along the main route (from split to merge)</span>
[~,~,~,tt_m]=plotTT(links,2:5,simTT,dt,totT);
title(<span class="string">'Travel time graph main route'</span>,<span class="string">'FontSize'</span>,14,<span class="string">'fontweight'</span>,<span class="string">'b'</span>)
<span class="comment">%visualize the travel time along the alternative route (from split to merge)</span>
[~,~,~,tt_a]=plotTT(links,7:10,simTT,dt,totT);
title(<span class="string">'Travel time graph alternative route'</span>,<span class="string">'FontSize'</span>,14,<span class="string">'fontweight'</span>,<span class="string">'b'</span>)

<span class="comment">%compare both travel times</span>
figure;
plot(dt*[0:totT],tt_m,<span class="string">'b'</span>,dt*[0:totT],tt_a,<span class="string">'r'</span>);
grid <span class="string">on</span>
legend(<span class="string">'Main route'</span>,<span class="string">'Alternative route'</span>)
xlabel(<span class="string">'Time [hr]'</span>,<span class="string">'FontSize'</span>,12);
ylabel(<span class="string">'Travel Time [hr]'</span>,<span class="string">'FontSize'</span>,12);
title(<span class="string">'Travel time graph'</span>,<span class="string">'FontSize'</span>,14,<span class="string">'fontweight'</span>,<span class="string">'b'</span>);
</pre><img vspace="5" hspace="5" src="tutorial13_04.png" alt=""> <img vspace="5" hspace="5" src="tutorial13_05.png" alt=""> <img vspace="5" hspace="5" src="tutorial13_06.png" alt=""> <h2>Visualize the split rates at the diverge<a name="7"></a></h2><p>The following lines of code visualize the splitting rates at the diverge.</p><pre class="codeinput">sp=[TF{2,:,1}];
figure;plot(dt*[0:totT-1],sp(1:2:end),<span class="string">'r'</span>,dt*[0:totT-1],sp(2:2:end),<span class="string">'b'</span>);
grid <span class="string">on</span>;
legend(<span class="string">'fraction using the main road'</span>, <span class="string">'fraction using the alternative'</span>);
</pre><img vspace="5" hspace="5" src="tutorial13_07.png" alt=""> <h2>Loading the data<a name="8"></a></h2><p>The network represents a simple two-route network with a bottleneck on the shortest alternative. The longer alternative has only a single link which is longer. This link is the last link of the alternative.</p><pre class="codeinput"><span class="comment">% Network and demand data</span>
load <span class="string">net7.mat</span>

<span class="comment">% Plot the network</span>
plotNetwork(nodes,links,true,[]);

<span class="comment">% Displays the link properties of the alternative</span>
links(7:10,:)
</pre><pre class="codeoutput">
ans = 

    id    fromNode    toNode    length    freeSpeed    capacity    kJam
    __    ________    ______    ______    _________    ________    ____

     7     2           8        1         100          2000        120 
     8     8           9        1         100          2000        120 
     9     9          10        1         100          2000        120 
    10    10           6        5         100          2000        120 

</pre><img vspace="5" hspace="5" src="tutorial13_08.png" alt=""> <h2>Setup the simulation<a name="9"></a></h2><p>Before the simulation can be run the time interval has to be set and the total number of time steps has to be defined.</p><pre class="codeinput"><span class="comment">%setup the time interval and total number of time steps</span>
dt = 0.01;
totT = round(1.5/dt);

<span class="comment">%build the full ODmatrix</span>
[ODmatrix,origins,destinations] = buildODmatrix(ODmatrices,timeSeries,dt,totT);
</pre><h2>Setup the dynamic equilibrium simulation<a name="10"></a></h2><p>The routing behavior in the stochastic routing behaviour is aggregated over larger time intervals to speed up computation. It is believed that the route choice time intervals varies with a much lower frequency in reality than the typical interval of a simulation. The routing is described by a logit model with a scaling parameter to capture the variance of the error term.</p><pre class="codeinput"><span class="comment">%time interval for the route choice</span>
rc_dt = dt;
<span class="comment">%maximum number of iterations</span>
max_it = 100;
<span class="comment">%scaling of the updates over iterations (&lt;1)</span>
alpha = 0.05;
<span class="comment">%scaling of the utility (logit)</span>
theta = 0.010;

<span class="comment">%run DTA with deterministic route choice and MSA averaging</span>
tic
[cvn_up,cvn_down,TF] = DTA_STOCH(nodes,links,origins,destinations,ODmatrix,dt,totT,rc_dt,max_it,alpha,theta);
toc
</pre><pre class="codeoutput">Maximum Iteration limit reached: 100 Gap: 436.131
Elapsed time is 33.184369 seconds.
</pre><img vspace="5" hspace="5" src="tutorial13_09.png" alt=""> <img vspace="5" hspace="5" src="tutorial13_10.png" alt=""> <h2>Transform CVN values to travel times<a name="11"></a></h2><p>The upstream and dowsntream CVN functions of the link transmission model are transformed into travel times for every link in the network. The travel times are compared for the main route (from split to merge) and the alternative route.</p><pre class="codeinput"><span class="comment">%calculate the simulated travel times</span>
[simTT] = cvn2tt(sum(cvn_up,3),sum(cvn_down,3),dt,totT,links);

<span class="comment">%visualize the travel time along the main route (from split to merge)</span>
[~,~,~,tt_m]=plotTT(links,2:5,simTT,dt,totT);
title(<span class="string">'Travel time graph main route'</span>,<span class="string">'FontSize'</span>,14,<span class="string">'fontweight'</span>,<span class="string">'b'</span>)
<span class="comment">%visualize the travel time along the alternative route (from split to merge)</span>
[~,~,~,tt_a]=plotTT(links,7:10,simTT,dt,totT);
title(<span class="string">'Travel time graph alternative route'</span>,<span class="string">'FontSize'</span>,14,<span class="string">'fontweight'</span>,<span class="string">'b'</span>)

<span class="comment">%compare both travel times</span>
figure;
plot(dt*[0:totT],tt_m,<span class="string">'b'</span>,dt*[0:totT],tt_a,<span class="string">'r'</span>);
grid <span class="string">on</span>
legend(<span class="string">'Main route'</span>,<span class="string">'Alternative route'</span>)
xlabel(<span class="string">'Time [hr]'</span>,<span class="string">'FontSize'</span>,12);
ylabel(<span class="string">'Travel Time [hr]'</span>,<span class="string">'FontSize'</span>,12);
title(<span class="string">'Travel time graph'</span>,<span class="string">'FontSize'</span>,14,<span class="string">'fontweight'</span>,<span class="string">'b'</span>);
</pre><img vspace="5" hspace="5" src="tutorial13_11.png" alt=""> <img vspace="5" hspace="5" src="tutorial13_12.png" alt=""> <img vspace="5" hspace="5" src="tutorial13_13.png" alt=""> <h2>Visualize the split rates at the diverge<a name="12"></a></h2><p>The following lines of code visualize the splitting rates at the diverge.</p><pre class="codeinput">sp=[TF{2,:,1}];
figure;plot(dt*[0:totT-1],sp(1:2:end),<span class="string">'r'</span>,dt*[0:totT-1],sp(2:2:end),<span class="string">'b'</span>);
grid <span class="string">on</span>;
legend(<span class="string">'fraction using the main road'</span>, <span class="string">'fraction using the alternative'</span>);
</pre><img vspace="5" hspace="5" src="tutorial13_14.png" alt=""> <h2>Closing notes<a name="13"></a></h2><div><ul><li>ITEM1</li><li>ITEM2</li></ul></div><p class="footer"><br><a href="http://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2014a</a><br></p></div><!--
##### SOURCE BEGIN #####
%% Tutorial 13: Introducing implicit stochastic equilibrium routing

%% Disclaimer
% This file is part of the matlab package for dynamic traffic assignments 
% developed by the KULeuven. 
%
% Copyright (C) 2016  Himpe Willem, Leuven, Belgium
%
% This program is free software: you can redistribute it and/or modify
% it under the terms of the GNU General Public License as published by
% the Free Software Foundation, either version 3 of the License, or
% any later version.
% 
% This program is distributed in the hope that it will be useful,
% but WITHOUT ANY WARRANTY; without even the implied warranty of
% MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
% GNU General Public License for more details.
% 
% You should have received a copy of the GNU General Public License
% along with this program.  If not, see <http://www.gnu.org/licenses/>.
%
% More information at: http://www.mech.kuleuven.be/en/cib/traffic/downloads
% or contact: willem.himpe {@} kuleuven.be

%% Introduction
% In this tutorial a basic algorithm is implemented to find a stochastic
% user equilibrium in a dynamic traffic assignment. The algorithm is based
% on an implicit routing procedure. This requires formulating a topological
% order of nodes to describe all available route alternatives without 
% circles. The topological order based on the shortest travel times has a 
% large influence on the convergence and solution of the algorithm. 
%

%add these folders to the search path
addpath('Dynamic Traffic Assignment','Visualization Tools','Network Data')
javaclasspath('Dynamic Traffic Assignment');
%clear the work space
clear
%clear the command window
clc
%close all windows
close all

display('<<<Introducing implicit stochastic equilibrium routing>>>')

%% Loading the data
% The network represents a simple two-route network with a bottleneck on 
% the shortest alternative. The longer alternative has only a single link 
% which is longer. This link is the first link of the alternative. 
%

% Network and demand data
load net6.mat

% Plot the network
plotNetwork(nodes,links,true,[]);

% Displays the link properties of the alternative
links(7:10,:)

%% Setup the simulation
% Before the simulation can be run the time interval has to be set and the
% total number of time steps has to be defined. 
%

%setup the time interval and total number of time steps
dt = 0.01;
totT = round(1.5/dt);

%build the full ODmatrix
[ODmatrix,origins,destinations] = buildODmatrix(ODmatrices,timeSeries,dt,totT);

%% Setup the dynamic equilibrium simulation
% The routing behavior in the stochastic routing behaviour is aggregated 
% over larger time intervals to speed up computation. It is believed that
% the route choice time intervals varies with a much lower frequency in 
% reality than the typical interval of a simulation. The routing is
% described by a logit model with a scaling parameter to capture the
% variance of the error term.
%

%time interval for the route choice
rc_dt = dt;
%maximum number of iterations
max_it = 100;
%scaling of the updates over iterations (<1)
alpha = 0.25;
%scaling of the utility (logit)
theta = 0.010;
 
%run DTA with deterministic route choice and MSA averaging
tic
[cvn_up,cvn_down,TF] = DTA_STOCH(nodes,links,origins,destinations,ODmatrix,dt,totT,rc_dt,max_it,alpha,theta);
toc

%% Transform CVN values to travel times
% The upstream and dowsntream CVN functions of the link transmission model
% are transformed into travel times for every link in the network. The
% travel times are compared for the main route (from split to merge) and
% the alternative route.
%

%calculate the simulated travel times
[simTT] = cvn2tt(sum(cvn_up,3),sum(cvn_down,3),dt,totT,links);

%visualize the travel time along the main route (from split to merge)
[~,~,~,tt_m]=plotTT(links,2:5,simTT,dt,totT);
title('Travel time graph main route','FontSize',14,'fontweight','b')
%visualize the travel time along the alternative route (from split to merge)
[~,~,~,tt_a]=plotTT(links,7:10,simTT,dt,totT);
title('Travel time graph alternative route','FontSize',14,'fontweight','b')

%compare both travel times
figure;
plot(dt*[0:totT],tt_m,'b',dt*[0:totT],tt_a,'r');
grid on
legend('Main route','Alternative route') 
xlabel('Time [hr]','FontSize',12);
ylabel('Travel Time [hr]','FontSize',12);
title('Travel time graph','FontSize',14,'fontweight','b');


%% Visualize the split rates at the diverge
% The following lines of code visualize the splitting rates at the diverge. 
%

sp=[TF{2,:,1}];
figure;plot(dt*[0:totT-1],sp(1:2:end),'r',dt*[0:totT-1],sp(2:2:end),'b');
grid on;
legend('fraction using the main road', 'fraction using the alternative');


%% Loading the data
% The network represents a simple two-route network with a bottleneck on 
% the shortest alternative. The longer alternative has only a single link 
% which is longer. This link is the last link of the alternative. 
%

% Network and demand data
load net7.mat

% Plot the network
plotNetwork(nodes,links,true,[]);

% Displays the link properties of the alternative
links(7:10,:)

%% Setup the simulation
% Before the simulation can be run the time interval has to be set and the
% total number of time steps has to be defined. 
%

%setup the time interval and total number of time steps
dt = 0.01;
totT = round(1.5/dt);

%build the full ODmatrix
[ODmatrix,origins,destinations] = buildODmatrix(ODmatrices,timeSeries,dt,totT);

%% Setup the dynamic equilibrium simulation
% The routing behavior in the stochastic routing behaviour is aggregated 
% over larger time intervals to speed up computation. It is believed that
% the route choice time intervals varies with a much lower frequency in 
% reality than the typical interval of a simulation. The routing is
% described by a logit model with a scaling parameter to capture the
% variance of the error term.
%

%time interval for the route choice
rc_dt = dt;
%maximum number of iterations
max_it = 100;
%scaling of the updates over iterations (<1)
alpha = 0.05;
%scaling of the utility (logit)
theta = 0.010;
 
%run DTA with deterministic route choice and MSA averaging
tic
[cvn_up,cvn_down,TF] = DTA_STOCH(nodes,links,origins,destinations,ODmatrix,dt,totT,rc_dt,max_it,alpha,theta);
toc

%% Transform CVN values to travel times
% The upstream and dowsntream CVN functions of the link transmission model
% are transformed into travel times for every link in the network. The
% travel times are compared for the main route (from split to merge) and
% the alternative route.
%

%calculate the simulated travel times
[simTT] = cvn2tt(sum(cvn_up,3),sum(cvn_down,3),dt,totT,links);

%visualize the travel time along the main route (from split to merge)
[~,~,~,tt_m]=plotTT(links,2:5,simTT,dt,totT);
title('Travel time graph main route','FontSize',14,'fontweight','b')
%visualize the travel time along the alternative route (from split to merge)
[~,~,~,tt_a]=plotTT(links,7:10,simTT,dt,totT);
title('Travel time graph alternative route','FontSize',14,'fontweight','b')

%compare both travel times
figure;
plot(dt*[0:totT],tt_m,'b',dt*[0:totT],tt_a,'r');
grid on
legend('Main route','Alternative route') 
xlabel('Time [hr]','FontSize',12);
ylabel('Travel Time [hr]','FontSize',12);
title('Travel time graph','FontSize',14,'fontweight','b');


%% Visualize the split rates at the diverge
% The following lines of code visualize the splitting rates at the diverge. 
%

sp=[TF{2,:,1}];
figure;plot(dt*[0:totT-1],sp(1:2:end),'r',dt*[0:totT-1],sp(2:2:end),'b');
grid on;
legend('fraction using the main road', 'fraction using the alternative');

%% Closing notes
%
% * ITEM1
% * ITEM2
% 
##### SOURCE END #####
--></body></html>