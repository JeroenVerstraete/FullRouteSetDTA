
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Tutorial 1: Visualizing network data</title><meta name="generator" content="MATLAB 8.3"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2016-06-25"><meta name="DC.source" content="tutorial1.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>Tutorial 1: Visualizing network data</h1><!--introduction--><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Disclaimer</a></li><li><a href="#2">Introduction</a></li><li><a href="#3">Loading the data</a></li><li><a href="#4">Basic plotting functions</a></li><li><a href="#5">Plotting results</a></li><li><a href="#6">Closing notes</a></li></ul></div><h2>Disclaimer<a name="1"></a></h2><p>This file is part of the matlab package for dynamic traffic assignments developed by the KULeuven.</p><p>Copyright (C) 2016  Himpe Willem, Leuven, Belgium</p><p>This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or any later version.</p><p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.</p><p>You should have received a copy of the GNU General Public License along with this program.  If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>.</p><p>More information at: <a href="http://www.mech.kuleuven.be/en/cib/traffic/downloads">http://www.mech.kuleuven.be/en/cib/traffic/downloads</a> or contact: willem.himpe {@} kuleuven.be</p><h2>Introduction<a name="2"></a></h2><p>This tutorial illustrates some of tools used to visualize data on a network. All of the results are preloaded and no traffic models are run in this tutorial. To run the full script simply hit run in the editor window or press F5. It is also possible to rerun a single section of the script or inspect data and functions (right mouse click or by pressing CTRL+D). For some sections additional information is printed to the command window during the run.</p><pre class="codeinput"><span class="comment">%add these folders to the search path</span>
addpath(<span class="string">'Visualization Tools'</span>,<span class="string">'Network Data'</span>)
<span class="comment">%clear the work space</span>
clear
<span class="comment">%clear the command window</span>
clc
<span class="comment">%close all windows</span>
close <span class="string">all</span>

display(<span class="string">'&lt;&lt;&lt;Visualizing network data&gt;&gt;&gt;'</span>)
</pre><pre class="codeoutput">&lt;&lt;&lt;Visualizing network data&gt;&gt;&gt;
</pre><h2>Loading the data<a name="3"></a></h2><p>Links and nodes are in table format. In older versions of matlab this could potentially lead to problems (there are alternative network codings in the Network Data map for older versions)</p><pre class="codeinput"><span class="comment">%network and demand data</span>
load <span class="string">net1.mat</span>

<span class="comment">%results (travel times, flows and densities) for a simulation with:</span>
<span class="comment">%dt: time interval</span>
<span class="comment">%totT: total number of intervals</span>
load <span class="string">result_net1.mat</span>
</pre><h2>Basic plotting functions<a name="4"></a></h2><p>These functions are use to visualize the network graph and visualize loads on the links (arcs) or nodes (edges). To illustrate link loads the capacity of each link is plotted and to illustrate node loads the number of outgoing links of each node is plotted.</p><pre class="codeinput"><span class="comment">%plot the network</span>
plotNetwork(nodes,links,true,[]);

<span class="comment">%plot loads (capacities) on the links</span>
plotLoadedLinks(nodes,links,links.capacity,true,[],[],[]);

<span class="comment">%plot loads (number of outgoing links) on the nodes</span>
nbOut = hist(links.fromNode,size(nodes.id,1));
plotLoadedNodes(nodes,links,nbOut',true,[],[],[]);
</pre><img vspace="5" hspace="5" src="tutorial1_01.png" alt=""> <img vspace="5" hspace="5" src="tutorial1_02.png" alt=""> <img vspace="5" hspace="5" src="tutorial1_03.png" alt=""> <h2>Plotting results<a name="5"></a></h2><p>These functions are used to visualize typical results of traffic simulation. The flows along a specific path in the network are depicted in space-time (or XT) diagrams. Within day travel times along the same path are visualized for different integrations of the link travel times. The variation of densities is animated in the network by considering only every 10th simulation interval.</p><pre class="codeinput"><span class="comment">%Visualizing results using XT diagrams</span>
plotXT(links,1:27,flows,dt,totT-1);

<span class="comment">%Visualize the travel time along a route</span>
plotTT(links,1:27,tt,dt,totT);

<span class="comment">%Make an animation of the result</span>
fRate = 20; <span class="comment">%set frame rate</span>
<span class="comment">% fRate = inf; %allows the for manual control using space bar</span>
animateSimulation(nodes,links,densities(:,1:10:end),dt*[0:10:totT],fRate);
</pre><pre class="codeoutput">press space bar to continue
</pre><img vspace="5" hspace="5" src="tutorial1_04.png" alt=""> <img vspace="5" hspace="5" src="tutorial1_05.png" alt=""> <img vspace="5" hspace="5" src="tutorial1_06.png" alt=""> <h2>Closing notes<a name="6"></a></h2><div><ul><li>The title of the XT-graphs can be changed using the same notation as for regular figures.</li><li>The animation plot can be manually controlled by setting the fRate to inf and pressing the space bar to progress.</li></ul></div><p class="footer"><br><a href="http://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2014a</a><br></p></div><!--
##### SOURCE BEGIN #####
%% Tutorial 1: Visualizing network data

%% Disclaimer
% This file is part of the matlab package for dynamic traffic assignments 
% developed by the KULeuven. 
%
% Copyright (C) 2016  Himpe Willem, Leuven, Belgium
%
% This program is free software: you can redistribute it and/or modify
% it under the terms of the GNU General Public License as published by
% the Free Software Foundation, either version 3 of the License, or
% any later version.
% 
% This program is distributed in the hope that it will be useful,
% but WITHOUT ANY WARRANTY; without even the implied warranty of
% MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
% GNU General Public License for more details.
% 
% You should have received a copy of the GNU General Public License
% along with this program.  If not, see <http://www.gnu.org/licenses/>.
%
% More information at: http://www.mech.kuleuven.be/en/cib/traffic/downloads
% or contact: willem.himpe {@} kuleuven.be

%% Introduction
% This tutorial illustrates some of tools used to visualize data on a
% network. All of the results are preloaded and no traffic models are run
% in this tutorial. To run the full script simply hit run in the editor 
% window or press F5. It is also possible to rerun a single section of the
% script or inspect data and functions (right mouse click or by 
% pressing CTRL+D). For some sections additional information is printed to 
% the command window during the run.
%

%add these folders to the search path
addpath('Visualization Tools','Network Data')
%clear the work space
clear
%clear the command window
clc
%close all windows
close all

display('<<<Visualizing network data>>>')


%% Loading the data
% Links and nodes are in table format. In older versions of matlab this
% could potentially lead to problems (there are alternative network
% codings in the Network Data map for older versions)
%

%network and demand data
load net1.mat

%results (travel times, flows and densities) for a simulation with:
%dt: time interval
%totT: total number of intervals
load result_net1.mat

%% Basic plotting functions
% These functions are use to visualize the network graph and visualize 
% loads on the links (arcs) or nodes (edges). To illustrate link loads the 
% capacity of each link is plotted and to illustrate node loads the number 
% of outgoing links of each node is plotted.
% 

%plot the network
plotNetwork(nodes,links,true,[]);

%plot loads (capacities) on the links
plotLoadedLinks(nodes,links,links.capacity,true,[],[],[]);

%plot loads (number of outgoing links) on the nodes
nbOut = hist(links.fromNode,size(nodes.id,1));
plotLoadedNodes(nodes,links,nbOut',true,[],[],[]);

%% Plotting results 
% These functions are used to visualize typical results of traffic
% simulation. The flows along a specific path in the network are
% depicted in space-time (or XT) diagrams. Within day travel times along 
% the same path are visualized for different integrations of the link
% travel times. The variation of densities is animated in the network by 
% considering only every 10th simulation interval.
%

%Visualizing results using XT diagrams
plotXT(links,1:27,flows,dt,totT-1);

%Visualize the travel time along a route
plotTT(links,1:27,tt,dt,totT);

%Make an animation of the result
fRate = 20; %set frame rate
% fRate = inf; %allows the for manual control using space bar
animateSimulation(nodes,links,densities(:,1:10:end),dt*[0:10:totT],fRate);

%% Closing notes
%
% * The title of the XT-graphs can be changed using the same notation as
% for regular figures.
% * The animation plot can be manually controlled by setting the fRate to
% inf and pressing the space bar to progress.
% 
##### SOURCE END #####
--></body></html>